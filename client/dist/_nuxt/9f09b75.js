(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{640:function(t,e,r){"use strict";r.r(e);r(13),r(10),r(12),r(4),r(14),r(11),r(15);var n=r(2),c=r(140),o=r(501),l=r(502);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={mixins:[o.validationMixin],validations:{stage:{text:{required:l.required,minLength:Object(l.minLength)(10)}}},components:{Header:c.a},created:function(){this.id=this.$route.params.id,this.quest=h({},this.$store.getters["create/getCurrentQuest"]),this.stage=h({},this.$store.getters["create/getCurrentStage"]),this.stage.stageAction&&this.stage.stageAction.text&&(this.stage.text=this.stage.stageAction.text),this.stage&&"Текст"!=this.stage.type&&this.$router.go(-1)},data:function(){return{snackbar:!1,stage:{},quest:{},text:"",id:0}},methods:{setStage:function(){this.$v.stage.$touch(),this.$v.stage.$anyError||(this.quest.stages[this.id]=this.stage,console.log(this.stage),this.$store.commit("create/setCurrentQuest",this.quest),this.snackbar=!0)}},computed:{textErrors:function(){var t=[];return this.$v.stage.text.$dirty?(!this.$v.stage.text.required&&t.push("Введите текст"),!this.$v.stage.text.minLength&&t.push("Текст должен быть содержательным"),t):t}}},f=r(40),x=r(44),m=r.n(x),y=r(219),_=r(466),k=r(464),O=r(511),$=r(201),w=r(513),j=r(629),C=r(516),P=r(457),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Header",{attrs:{title:"Редактор текста"}}),t._v(" "),r("v-row",{staticClass:"my-3 d-flex justify-space-between text-center align-center"},[r("v-col",{staticClass:"col col-2",attrs:{"no-gutters":""}},[r("v-icon",{attrs:{large:""},on:{click:function(e){return t.$router.go(-1)}}},[t._v("\n                mdi-arrow-left\n            ")])],1),t._v(" "),r("v-col",{staticClass:"col secondary--text text-h6 col-6"},[t._v("\n           "+t._s(t.quest.id)+" / "+t._s(t.id)+"\n        ")]),t._v(" "),r("v-col",{staticClass:"col col-2"})],1),t._v(" "),r("v-main",{staticClass:"pa-2 mt-4"},[r("v-card",{class:{redBorder:t.textErrors.length},on:{click:function(e){return t.$v.stage.text.$touch()}}},[r("wysiwyg",{model:{value:t.stage.text,callback:function(e){t.$set(t.stage,"text",e)},expression:"stage.text"}})],1),t._v(" "),t.stage.text?r("v-card",{staticClass:"mt-4 pa-2",domProps:{innerHTML:t._s(t.stage.text)}}):t._e(),t._v(" "),r("v-card-actions",{staticClass:"pa-0 mt-4"},[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(e){return t.$router.go(-1)}}},[t._v("Назад")]),t._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:t.setStage}},[t._v("Сохранить")])],1)],1),t._v(" "),r("v-snackbar",{scopedSlots:t._u([{key:"action",fn:function(e){e.attrs;return[r("v-btn",{staticClass:"primary--text",attrs:{text:"",small:""},on:{click:function(e){t.snackbar=!t.snackbar}}},[t._v("\n                Закрыть\n            ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n        Изменения сохранены\n        ")])],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{VBtn:y.a,VCard:_.a,VCardActions:k.a,VCol:O.a,VIcon:$.a,VMain:w.a,VRow:j.a,VSnackbar:C.a,VSpacer:P.a})}}]);